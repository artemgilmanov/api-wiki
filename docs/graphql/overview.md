### Problems with REST
Fixed Entity structure
- the client cannot specify the entity parts it want to retrieve
- the entity returned is set by the backend developer and cannot be modified on a per-query basis
- there is no way to retrieve only the fields are needed
- increases load time and network latency
- sometimes forces to create specialized entity types just for specific queries - maintenance and data model problem
Request-Response Only
- push notifications are becoming extremely useful
- can be implementing using:
	- Polling
	- Web Sockets
- not part of the protocol
- complex

### History of GraphQL

Facebook developed GraphQL as a replacement of REST API for internal use
First used in 2012
Specification was opened sourced in 2015
Currently managed by the GraphQL Foundation

### GraphQL Basics
a specification
-  defines the semantic and components of a GraphQL API
- does not provide concrete implementations
- other parties develop implementations in many languages
- full specs can be found here: https://github.com/graphql/graphql-spec
defines structure of data returned
- can specify the part(s) of entity to return
- can specify related entities to be returned
- can specify filtering in the query
JSON-based
- extensive usage of JSON
- query send to server in JSON
- data is returned in JSON
- Technically can be used with other protocols, nobody does this
three types of operations
- Retrieve data
- Write/Change Data
- Subscribe to changes in data
Schema-based
- defines the entities, fields and attributes
- operations build on the schema
Cross-platform

### Working with GraphQL
Defining Schema
Defining Queries
Defining Mutations and Subscriptions (optional)
Implementing the logic

### Role of Schema
- For that, GraphQL needs to know there is such an object and such field
- The schema is used to define:
- the shape of data
- queries
- mutations
- subscriptions
- GraphQL uses the schema to:
- Validate queries
- …and other operations
- Provide autocomplete in playground
- The Schema has a type system:
- Field name
- Field type
- Nullability
 - The schema uses specialized language:
- Schema Definition Language 
- Defines the object, fields, type system, queries and more
- The schema is sometimes autogenerated by the GraphQL implementation
- Based on the concrete language-specific objects
- Can be viewed in the playground

### Object types and fields
The basic building blocks of the schema
Describe the entities and their properties in the system
Allow GraphQL to be familiar with the system’s objects and o provide validation to these entities

### Field Types
Each field has a data type, indicating the type of data it can store
GraphQl specifications contain build-in Scalar types
Primitive types that hold a single value
Complex types can be also defined

### Build in scala types
Int, Float, String, Boolean, Id
Most implementations add custom scalar types, f.e.: date

### Enumerations
A special type of scalar
Limits the values a field can have to a predefined list
Great for making sure only valid values are selected
Invalid values will be marked as error in GraphQL

### Lists
Objects can hold lists of other objects
Can be declared in the schema
Requires a special attention to list and nullable types

### Unions
Allow querying multiple object types in a single query
In contrast to interface, object types do not have to have common fields
Query can specify which field to retrieve from each object type
{
items{
  __typename
  ...on Book {
    name
    publishDate
    reviews {
      rating
    }
  }
  ...on Magazine {
    name
    genre
   }
}
}

